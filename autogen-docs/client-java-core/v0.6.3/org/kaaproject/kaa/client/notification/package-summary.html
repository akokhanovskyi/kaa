<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_51) on Mon Feb 16 12:41:28 EET 2015 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>org.kaaproject.kaa.client.notification (Kaa Client (Java Core) 0.6.3 API)</title>
<meta name="date" content="2015-02-16">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="org.kaaproject.kaa.client.notification (Kaa Client (Java Core) 0.6.3 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/kaaproject/kaa/client/logging/gen/package-summary.html">Prev Package</a></li>
<li><a href="../../../../../org/kaaproject/kaa/client/persistence/package-summary.html">Next Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/kaaproject/kaa/client/notification/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;org.kaaproject.kaa.client.notification</h1>
<div class="docSummary">
<div class="block">Provides implementation of a notification management.</div>
</div>
<p>See:&nbsp;<a href="#package_description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../org/kaaproject/kaa/client/notification/NotificationListener.html" title="interface in org.kaaproject.kaa.client.notification">NotificationListener</a></td>
<td class="colLast">
<div class="block">The listener of raw notifications' data.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../org/kaaproject/kaa/client/notification/NotificationManager.html" title="interface in org.kaaproject.kaa.client.notification">NotificationManager</a></td>
<td class="colLast">
<div class="block">Interface for the notification delivery system.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../org/kaaproject/kaa/client/notification/NotificationProcessor.html" title="interface in org.kaaproject.kaa.client.notification">NotificationProcessor</a></td>
<td class="colLast">
<div class="block">Processes notifications.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../org/kaaproject/kaa/client/notification/NotificationTopicListListener.html" title="interface in org.kaaproject.kaa.client.notification">NotificationTopicListListener</a></td>
<td class="colLast">
<div class="block">The listener for topics' list updates.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../org/kaaproject/kaa/client/notification/AbstractNotificationListener.html" title="class in org.kaaproject.kaa.client.notification">AbstractNotificationListener</a>&lt;T extends org.apache.avro.specific.SpecificRecordBase&gt;</td>
<td class="colLast">
<div class="block">Abstract listener for received notifications.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../org/kaaproject/kaa/client/notification/DefaultNotificationManager.html" title="class in org.kaaproject.kaa.client.notification">DefaultNotificationManager</a></td>
<td class="colLast">
<div class="block">Default <a href="../../../../../org/kaaproject/kaa/client/notification/NotificationManager.html" title="interface in org.kaaproject.kaa.client.notification"><code>NotificationManager</code></a> implementation.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../org/kaaproject/kaa/client/notification/NotificationListenerInfo.html" title="class in org.kaaproject.kaa.client.notification">NotificationListenerInfo</a></td>
<td class="colLast">Deprecated</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="Enum Summary table, listing enums, and an explanation">
<caption><span>Enum Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Enum</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../org/kaaproject/kaa/client/notification/NotificationListenerInfo.Action.html" title="enum in org.kaaproject.kaa.client.notification">NotificationListenerInfo.Action</a></td>
<td class="colLast">Deprecated</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="Exception Summary table, listing exceptions, and an explanation">
<caption><span>Exception Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Exception</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../org/kaaproject/kaa/client/notification/UnavailableTopicException.html" title="class in org.kaaproject.kaa.client.notification">UnavailableTopicException</a></td>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package_description">
<!--   -->
</a>
<h2 title="Package org.kaaproject.kaa.client.notification Description">Package org.kaaproject.kaa.client.notification Description</h2>
<div class="block"><p>Provides implementation of a notification management.</p>

  <p>The Kaa Notifications subsystem enables messages delivery from the
  Kaa cluster to endpoints (EP). It is based on auto-generated classes
  according to the topic's notification schema used during SDK generation.</p>

  <p>Notification topics can be mandatory or optional. Mandatory topic
  notifications are delivered in an enforced manner. Optional topics require
  subscription. It is the responsibility of the client code to register
  the topic update listener and subscribe to optional topics.</p>

  <h3>Topics - usage examples</h3>

  <h5>Access to available topics</h5>
  <pre>
  <code>KaaDesktop kaa = new KaaDesktop();
  KaaClient kaaClient = kaa.getClient();

  // Kaa initialization (profile container, schema and configuration storages etc.)

  NotificationManager notificationManager = kaaClient.getNotificationManager();
  List&lt;Topic&gt; topics = notificationManager.getTopics();

  for (Topic topic : topics) {
  System.out.printf("Id: %s, name: %s, type: %s"
              , topic.getId(), topic.getName(), topic.getSubscriptionType());
  }
  </code>
  </pre>

  <h5>Topic update subscription</h5>

  <p>If there is need to know about topic list updates, do following
  (<a href="../../../../../org/kaaproject/kaa/client/notification/NotificationTopicListListener.html" title="interface in org.kaaproject.kaa.client.notification"><code>NotificationTopicListListener</code></a>):</p>
  <pre>
  <code>notificationManager.addTopicListListener(new NotificationTopicListListener() {
      \@Override
      public void onListUpdated(List&lt;Topic&gt; topics) {
          for (Topic topic : topics) {
              System.out.printf("Id: %s, name: %s, type: %s"
                      , topic.getId(), topic.getName(), topic.getSubscriptionType());
          }
      }
  });
  </code>
  </pre>

  <p>To remove topic update listener, call
  <a href="../../../../../org/kaaproject/kaa/client/notification/NotificationManager.html#removeTopicListListener(org.kaaproject.kaa.client.notification.NotificationTopicListListener)"><code>NotificationManager.removeTopicListListener(NotificationTopicListListener)</code></a>
  with an appropriate listener.</p>

  <h3>Notifications - usage examples</h3>

  <p>In order to receive notifications, both mandatory or optional, there
  should be add an appropriate listener. The listener may be one for all topics.
  Also there is possibility to add listener for specific topic notifications.</p>

  <p>Assume, notification schema has the following form:</p>
  <pre>
  <code>{
          "type": "record",
          "name": "BasicNotification",
          "namespace": "org.kaaproject.kaa.client.example",
          "fields": [
              {
                  "name": "body",
                  "type": "string"
              }
          ]
      }
  </code>
  </pre>

  <p>As mentioned earlier, there is two kind of topics - mandatory and
  optional. Further it will be discussed dealing with both of them.</p>

  <h5>Notification listener(s) for all topics</h5>

  <p>Below is an example of receiving notifications relating to all topics
  irrespective whether it is mandatory or optional:</p>

  <pre>
  <code>public class BasicNotificationListener extends AbstractNotificationListener&lt;BasicNotification&gt; {
      \@Override
      public void onNotification(String topicId, BasicNotification notification) {
          System.out.println("Got notification: " + notification.toString());
      }

      \@Override
      protected Class&lt;BasicNotification&gt; getNotificationClass() {
           return BasicNotification.class;
       }
  }

  ...

  BasicNotificationListener listener = new BasicNotificationListener();

  // Add listener
  notificationManager.addNotificationListener(listener);

  ...

  // Remove listener
  notificationManager.removeNotificationListener(listener);
  </code>
  </pre>

  <h5>Notification listener(s) for a specified topic</h5>

  <p>To add/remove listener(s) to receive notifications relating to
  the specified topic, do following</p>

  <pre>
  <code>BasicNotificationListener specificListener = new BasicNotificationListener();
  Map&lt;String, List&lt;NotificationListenerInfo&gt;&gt; subscriptions = new HashMap&lt;&gt;();

  // Add listener
  notificationManager.addNotificationListener("some_mandatory_topic_id", listener);

  ...

  // Remove listener
  notificationManager.removeNotificationListener("another_mandatory_topic_id", listener);
  </code>
  </pre>

  <h5>Optional topic (un)subscription</h5>

  <p>To receive notifications relating to some optional topic, firstly you
  should to subscribe to this topic:</p>
  <pre>
  <code>BasicNotificationListener listener = new BasicNotificationListener();
  notificationManager.addNotificationListener("optional_topic_id", listener);
  notificationManager.subscribeToTopic("optional_topic_id", true);
  </code>
  </pre>

  <p>To unsubscribe from some optional topic, do following:</p>
  <pre>
  <code>// All added listeners will be removed automatically
  notificationManager.unsubscribeFromTopic("optional_topic_id", true);
  </code>
  </pre>

  <p>There is a similar stuff to deal with a group of optional topics -
  <a href="../../../../../org/kaaproject/kaa/client/notification/NotificationManager.html#subscribeToTopics(java.util.List, boolean)"><code>NotificationManager.subscribeToTopics(java.util.List, boolean)</code></a> and
  <a href="../../../../../org/kaaproject/kaa/client/notification/NotificationManager.html#unsubscribeFromTopics(java.util.List, boolean)"><code>NotificationManager.unsubscribeFromTopics(java.util.List, boolean)</code></a>.</p>

  <h6>Performance</h6>

  <p>To increase Kaa performance in case of several subsequent subscription
  changes and avoid possible race conditions, we recommend to use following
  approach:</p>
  <pre>
  <code>// Make subscription changes
  notificationManager.subscribeToTopics(Arrays.asList(
          "optional_topic1", "optional_topic2", "optional_topic3"), false);
  notificationManager.unsubscribeFromTopic("optional_topic4", false);

  // Add listeners for optional topics here

  // Commit changes
  notificationManager.sync();
  </code>
  </pre></div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../org/kaaproject/kaa/client/notification/NotificationManager.html" title="interface in org.kaaproject.kaa.client.notification"><code>NotificationManager</code></a>, 
<a href="../../../../../org/kaaproject/kaa/client/notification/AbstractNotificationListener.html" title="class in org.kaaproject.kaa.client.notification"><code>AbstractNotificationListener</code></a>, 
<a href="../../../../../org/kaaproject/kaa/client/notification/NotificationTopicListListener.html" title="interface in org.kaaproject.kaa.client.notification"><code>NotificationTopicListListener</code></a></dd></dl>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/kaaproject/kaa/client/logging/gen/package-summary.html">Prev Package</a></li>
<li><a href="../../../../../org/kaaproject/kaa/client/persistence/package-summary.html">Next Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/kaaproject/kaa/client/notification/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2015. All rights reserved.</small></p>
</body>
</html>
